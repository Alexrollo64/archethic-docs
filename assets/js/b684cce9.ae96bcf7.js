"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6829],{2048:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>p,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var n=a(7462),i=(a(7294),a(3905));a(1839);const s={id:"dns",title:"AEWeb (DNS)",sidebar_label:"Domain Names"},r=void 0,l={unversionedId:"participate/aeweb/dns",id:"participate/aeweb/dns",title:"AEWeb (DNS)",description:"DNS (Domain Name System) is a mechanism which resolves websites names to server IP addresses, making website's URL nicer.",source:"@site/docs/participate/aeweb/dns.md",sourceDirName:"participate/aeweb",slug:"/participate/aeweb/dns",permalink:"/participate/aeweb/dns",draft:!1,tags:[],version:"current",lastUpdatedAt:1683271161,formattedLastUpdatedAt:"May 5, 2023",frontMatter:{id:"dns",title:"AEWeb (DNS)",sidebar_label:"Domain Names"},sidebar:"docs",previous:{title:"Automate deployments",permalink:"/participate/aeweb/automation"},next:{title:"Archethic Wallet",permalink:"/participate/archethic-wallet"}},o={},c=[{value:"DNSLink",id:"dnslink",level:2},{value:"SSL",id:"ssl",level:2},{value:"1. Get the certificate",id:"1-get-the-certificate",level:3},{value:"Manual",id:"manual",level:4},{value:"2. Add the certificate on chain",id:"2-add-the-certificate-on-chain",level:3}],d={toc:c};function p(e){let{components:t,...s}=e;return(0,i.kt)("wrapper",(0,n.Z)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"DNS (Domain Name System) is a mechanism which resolves websites names to server IP addresses, making website's URL nicer."),(0,i.kt)("p",null,"This works well for classical websites, however for decentralized websites new solutions need to be found such as: DNSLink, extensions, etc."),(0,i.kt)("h2",{id:"dnslink"},"DNSLink"),(0,i.kt)("p",null,"We suggest using a hybrid approach, where ordinary DNS systems would still be used, but would point to Archethic nodes (gateways) instead."),(0,i.kt)("p",null,"To redirect your domain name to your Archethic hosted website, a simple operation needs to be done."),(0,i.kt)("p",null,"In your website domain provider administration, you must add two entries:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"NAME"),(0,i.kt)("th",{parentName:"tr",align:null},"TYPE"),(0,i.kt)("th",{parentName:"tr",align:null},"VALUE"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"example.com"),(0,i.kt)("td",{parentName:"tr",align:null},"CNAME"),(0,i.kt)("td",{parentName:"tr",align:null},"mainnet.archethic.net")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"_","dnslink.example.com"),(0,i.kt)("td",{parentName:"tr",align:null},"TXT"),(0,i.kt)("td",{parentName:"tr",align:null},"dnslink=/archethic/0f1e3....")))),(0,i.kt)("p",null,"The subdomain ",(0,i.kt)("inlineCode",{parentName:"p"},"_dnslink")," is used to indicate the reference address and will be used by the nodes to redirect to the on-chain version of your website."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"aeweb_dns",src:a(2088).Z,width:"329",height:"135"})),(0,i.kt)("h2",{id:"ssl"},"SSL"),(0,i.kt)("p",null,"We defined above to create a link between a domain and a hosted website on Archethic."),(0,i.kt)("p",null,"However, if we let it like this the modern browsers will not able to render the website without security warning."),(0,i.kt)("p",null,"Indeed, we said the example.com should be redirect to mainnet.archethic.net, but the certificate for mainnet.archethic.net can't\nverify example.com"),(0,i.kt)("p",null,"No worry, we can request a SSL certificate and embed it into AEWeb transactions.\nThe website will then be certified and the blockchain will render the website with security enabled."),(0,i.kt)("p",null,"To support it, we have to do two things:"),(0,i.kt)("h3",{id:"1-get-the-certificate"},"1. Get the certificate"),(0,i.kt)("h4",{id:"manual"},"Manual"),(0,i.kt)("p",null,"We recommand to use certbot CLI to perform this task, but we can use any other ACME client to request certificates."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"certbot certonly --manual --domain example.com --preferred-challenges dns\n")),(0,i.kt)("p",null,"This command will request a certificate to Let's Encrypt about ",(0,i.kt)("inlineCode",{parentName:"p"},"example.com")," and will require to prove\nthe ownership of the domain with a DNS challenge."),(0,i.kt)("p",null,"The certificate can be found at: ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/letsencrypt/live/example.com/cert.pem"),"\nand the key at: ",(0,i.kt)("inlineCode",{parentName:"p"},"/etc/letsencrypt/live/example.com/privatekey.pem")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"We might notice the command gives the end of validity for the certificate.\nBefore this date, you just have to reply the command to assert you still own the domain to get the new certificate and/or key.")),(0,i.kt)("p",null,(0,i.kt)("img",{src:a(8647).Z,width:"2000",height:"1024"})),(0,i.kt)("h3",{id:"2-add-the-certificate-on-chain"},"2. Add the certificate on chain"),(0,i.kt)("p",null,"You need to get the certificate and the private key associated."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"The private key is necessary to sign/encrypt the webpages to match the certificates and be considered as valid.\nOnly the nodes will have access to this key to allow the servers to use SSL communications.")),(0,i.kt)("p",null,"If you use the AEWeb CLI, we can perform this by running the command: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"aeweb deploy --seed XXX --path ./my_website --ssl-certificate ./cert.pem --ssl-key ./key.pem --endpoint https://mainnet.archethic.net \n")),(0,i.kt)("p",null,"You're website transaction chain will then contains a ",(0,i.kt)("inlineCode",{parentName:"p"},"Reference")," transaction with the ssl certificate in the content\nand the private key end to end encrypted for the network."))}p.isMDXComponent=!0},8647:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/acme_dns-3c3182fe25541047fc08bf5307993f70.png"},2088:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/aeweb_dns-06778c4756739f0a9144cff45a4dd64e.svg"}}]);